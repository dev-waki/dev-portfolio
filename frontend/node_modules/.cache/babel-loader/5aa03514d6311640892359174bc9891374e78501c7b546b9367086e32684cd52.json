{"ast":null,"code":"/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Sergey Melyukov @smelukov\n*/\n\n\"use strict\";\n\nconst mimeTypes = require(\"mime-types\");\nconst path = require(\"path\");\nconst {\n  RawSource\n} = require(\"webpack-sources\");\nconst ConcatenationScope = require(\"../ConcatenationScope\");\nconst Generator = require(\"../Generator\");\nconst {\n  NO_TYPES,\n  ASSET_TYPES,\n  ASSET_AND_JS_TYPES,\n  ASSET_AND_JS_AND_CSS_URL_TYPES,\n  ASSET_AND_CSS_URL_TYPES,\n  JS_TYPES,\n  JS_AND_CSS_URL_TYPES,\n  CSS_URL_TYPES\n} = require(\"../ModuleSourceTypesConstants\");\nconst {\n  ASSET_MODULE_TYPE\n} = require(\"../ModuleTypeConstants\");\nconst RuntimeGlobals = require(\"../RuntimeGlobals\");\nconst CssUrlDependency = require(\"../dependencies/CssUrlDependency\");\nconst createHash = require(\"../util/createHash\");\nconst {\n  makePathsRelative\n} = require(\"../util/identifier\");\nconst nonNumericOnlyHash = require(\"../util/nonNumericOnlyHash\");\n\n/** @typedef {import(\"webpack-sources\").Source} Source */\n/** @typedef {import(\"../../declarations/WebpackOptions\").AssetGeneratorDataUrlOptions} AssetGeneratorDataUrlOptions */\n/** @typedef {import(\"../../declarations/WebpackOptions\").AssetGeneratorOptions} AssetGeneratorOptions */\n/** @typedef {import(\"../../declarations/WebpackOptions\").AssetModuleFilename} AssetModuleFilename */\n/** @typedef {import(\"../../declarations/WebpackOptions\").AssetModuleOutputPath} AssetModuleOutputPath */\n/** @typedef {import(\"../../declarations/WebpackOptions\").RawPublicPath} RawPublicPath */\n/** @typedef {import(\"../Compilation\")} Compilation */\n/** @typedef {import(\"../Compilation\").AssetInfo} AssetInfo */\n/** @typedef {import(\"../Compilation\").InterpolatedPathAndAssetInfo} InterpolatedPathAndAssetInfo */\n/** @typedef {import(\"../Compiler\")} Compiler */\n/** @typedef {import(\"../Generator\").GenerateContext} GenerateContext */\n/** @typedef {import(\"../Generator\").UpdateHashContext} UpdateHashContext */\n/** @typedef {import(\"../Module\")} Module */\n/** @typedef {import(\"../Module\").BuildInfo} BuildInfo */\n/** @typedef {import(\"../Module\").BuildMeta} BuildMeta */\n/** @typedef {import(\"../Module\").ConcatenationBailoutReasonContext} ConcatenationBailoutReasonContext */\n/** @typedef {import(\"../Module\").SourceTypes} SourceTypes */\n/** @typedef {import(\"../ModuleGraph\")} ModuleGraph */\n/** @typedef {import(\"../NormalModule\")} NormalModule */\n/** @typedef {import(\"../RuntimeTemplate\")} RuntimeTemplate */\n/** @typedef {import(\"../TemplatedPathPlugin\").TemplatePath} TemplatePath */\n/** @typedef {import(\"../util/Hash\")} Hash */\n/** @typedef {import(\"../util/createHash\").Algorithm} Algorithm */\n\n/**\n * @template T\n * @template U\n * @param {Array<T> | Set<T>} a a\n * @param {Array<U> | Set<U>} b b\n * @returns {Array<T> & Array<U>} array\n */\nconst mergeMaybeArrays = (a, b) => {\n  const set = new Set();\n  if (Array.isArray(a)) for (const item of a) set.add(item);else set.add(a);\n  if (Array.isArray(b)) for (const item of b) set.add(item);else set.add(b);\n  return Array.from(set);\n};\n\n/**\n * @template {object} T\n * @template {object} U\n * @param {TODO} a a\n * @param {TODO} b b\n * @returns {T & U} object\n */\nconst mergeAssetInfo = (a, b) => {\n  const result = {\n    ...a,\n    ...b\n  };\n  for (const key of Object.keys(a)) {\n    if (key in b) {\n      if (a[key] === b[key]) continue;\n      switch (key) {\n        case \"fullhash\":\n        case \"chunkhash\":\n        case \"modulehash\":\n        case \"contenthash\":\n          result[key] = mergeMaybeArrays(a[key], b[key]);\n          break;\n        case \"immutable\":\n        case \"development\":\n        case \"hotModuleReplacement\":\n        case \"javascriptModule\":\n          result[key] = a[key] || b[key];\n          break;\n        case \"related\":\n          result[key] = mergeRelatedInfo(a[key], b[key]);\n          break;\n        default:\n          throw new Error(`Can't handle conflicting asset info for ${key}`);\n      }\n    }\n  }\n  return result;\n};\n\n/**\n * @template {object} T\n * @template {object} U\n * @param {TODO} a a\n * @param {TODO} b b\n * @returns {T & U} object\n */\nconst mergeRelatedInfo = (a, b) => {\n  const result = {\n    ...a,\n    ...b\n  };\n  for (const key of Object.keys(a)) {\n    if (key in b) {\n      if (a[key] === b[key]) continue;\n      result[key] = mergeMaybeArrays(a[key], b[key]);\n    }\n  }\n  return result;\n};\n\n/**\n * @param {\"base64\" | false} encoding encoding\n * @param {Source} source source\n * @returns {string} encoded data\n */\nconst encodeDataUri = (encoding, source) => {\n  /** @type {string | undefined} */\n  let encodedContent;\n  switch (encoding) {\n    case \"base64\":\n      {\n        encodedContent = source.buffer().toString(\"base64\");\n        break;\n      }\n    case false:\n      {\n        const content = source.source();\n        if (typeof content !== \"string\") {\n          encodedContent = content.toString(\"utf-8\");\n        }\n        encodedContent = encodeURIComponent(/** @type {string} */\n        encodedContent).replace(/[!'()*]/g, character => `%${/** @type {number} */character.codePointAt(0).toString(16)}`);\n        break;\n      }\n    default:\n      throw new Error(`Unsupported encoding '${encoding}'`);\n  }\n  return encodedContent;\n};\n\n/**\n * @param {string} encoding encoding\n * @param {string} content content\n * @returns {Buffer} decoded content\n */\nconst decodeDataUriContent = (encoding, content) => {\n  const isBase64 = encoding === \"base64\";\n  if (isBase64) {\n    return Buffer.from(content, \"base64\");\n  }\n\n  // If we can't decode return the original body\n  try {\n    return Buffer.from(decodeURIComponent(content), \"ascii\");\n  } catch (_) {\n    return Buffer.from(content, \"ascii\");\n  }\n};\nconst DEFAULT_ENCODING = \"base64\";\nclass AssetGenerator extends Generator {\n  /**\n   * @param {ModuleGraph} moduleGraph the module graph\n   * @param {AssetGeneratorOptions[\"dataUrl\"]=} dataUrlOptions the options for the data url\n   * @param {AssetModuleFilename=} filename override for output.assetModuleFilename\n   * @param {RawPublicPath=} publicPath override for output.assetModulePublicPath\n   * @param {AssetModuleOutputPath=} outputPath the output path for the emitted file which is not included in the runtime import\n   * @param {boolean=} emit generate output asset\n   */\n  constructor(moduleGraph, dataUrlOptions, filename, publicPath, outputPath, emit) {\n    super();\n    this.dataUrlOptions = dataUrlOptions;\n    this.filename = filename;\n    this.publicPath = publicPath;\n    this.outputPath = outputPath;\n    this.emit = emit;\n    this._moduleGraph = moduleGraph;\n  }\n\n  /**\n   * @param {NormalModule} module module\n   * @param {RuntimeTemplate} runtimeTemplate runtime template\n   * @returns {string} source file name\n   */\n  getSourceFileName(module, runtimeTemplate) {\n    return makePathsRelative(runtimeTemplate.compilation.compiler.context, module.matchResource || module.resource, runtimeTemplate.compilation.compiler.root).replace(/^\\.\\//, \"\");\n  }\n\n  /**\n   * @param {NormalModule} module module for which the bailout reason should be determined\n   * @param {ConcatenationBailoutReasonContext} context context\n   * @returns {string | undefined} reason why this module can't be concatenated, undefined when it can be concatenated\n   */\n  getConcatenationBailoutReason(module, context) {\n    return undefined;\n  }\n\n  /**\n   * @param {NormalModule} module module\n   * @returns {string} mime type\n   */\n  getMimeType(module) {\n    if (typeof this.dataUrlOptions === \"function\") {\n      throw new Error(\"This method must not be called when dataUrlOptions is a function\");\n    }\n\n    /** @type {string | boolean | undefined} */\n    let mimeType = /** @type {AssetGeneratorDataUrlOptions} */\n    this.dataUrlOptions.mimetype;\n    if (mimeType === undefined) {\n      const ext = path.extname(/** @type {string} */\n      module.nameForCondition());\n      if (module.resourceResolveData && module.resourceResolveData.mimetype !== undefined) {\n        mimeType = module.resourceResolveData.mimetype + module.resourceResolveData.parameters;\n      } else if (ext) {\n        mimeType = mimeTypes.lookup(ext);\n        if (typeof mimeType !== \"string\") {\n          throw new Error(\"DataUrl can't be generated automatically, \" + `because there is no mimetype for \"${ext}\" in mimetype database. ` + 'Either pass a mimetype via \"generator.mimetype\" or ' + 'use type: \"asset/resource\" to create a resource file instead of a DataUrl');\n        }\n      }\n    }\n    if (typeof mimeType !== \"string\") {\n      throw new Error(\"DataUrl can't be generated automatically. \" + 'Either pass a mimetype via \"generator.mimetype\" or ' + 'use type: \"asset/resource\" to create a resource file instead of a DataUrl');\n    }\n    return /** @type {string} */mimeType;\n  }\n\n  /**\n   * @param {NormalModule} module module for which the code should be generated\n   * @returns {string} DataURI\n   */\n  generateDataUri(module) {\n    const source = /** @type {Source} */module.originalSource();\n    let encodedSource;\n    if (typeof this.dataUrlOptions === \"function\") {\n      encodedSource = this.dataUrlOptions.call(null, source.source(), {\n        filename: module.matchResource || module.resource,\n        module\n      });\n    } else {\n      /** @type {\"base64\" | false | undefined} */\n      let encoding = /** @type {AssetGeneratorDataUrlOptions} */\n      this.dataUrlOptions.encoding;\n      if (encoding === undefined && module.resourceResolveData && module.resourceResolveData.encoding !== undefined) {\n        encoding = module.resourceResolveData.encoding;\n      }\n      if (encoding === undefined) {\n        encoding = DEFAULT_ENCODING;\n      }\n      const mimeType = this.getMimeType(module);\n      let encodedContent;\n      if (module.resourceResolveData && module.resourceResolveData.encoding === encoding && decodeDataUriContent(module.resourceResolveData.encoding, module.resourceResolveData.encodedContent).equals(source.buffer())) {\n        encodedContent = module.resourceResolveData.encodedContent;\n      } else {\n        encodedContent = encodeDataUri(encoding, source);\n      }\n      encodedSource = `data:${mimeType}${encoding ? `;${encoding}` : \"\"},${encodedContent}`;\n    }\n    return encodedSource;\n  }\n\n  /**\n   * @private\n   * @param {NormalModule} module module for which the code should be generated\n   * @param {GenerateContext} generateContext context for generate\n   * @param {string} contentHash the content hash\n   * @returns {{ filename: string, originalFilename: string, assetInfo: AssetInfo }} info\n   */\n  _getFilenameWithInfo(module, {\n    runtime,\n    runtimeTemplate,\n    chunkGraph\n  }, contentHash) {\n    const assetModuleFilename = this.filename || (/** @type {AssetModuleFilename} */\n    runtimeTemplate.outputOptions.assetModuleFilename);\n    const sourceFilename = this.getSourceFileName(module, runtimeTemplate);\n    let {\n      path: filename,\n      info: assetInfo\n    } = runtimeTemplate.compilation.getAssetPathWithInfo(assetModuleFilename, {\n      module,\n      runtime,\n      filename: sourceFilename,\n      chunkGraph,\n      contentHash\n    });\n    const originalFilename = filename;\n    if (this.outputPath) {\n      const {\n        path: outputPath,\n        info\n      } = runtimeTemplate.compilation.getAssetPathWithInfo(this.outputPath, {\n        module,\n        runtime,\n        filename: sourceFilename,\n        chunkGraph,\n        contentHash\n      });\n      filename = path.posix.join(outputPath, filename);\n      assetInfo = mergeAssetInfo(assetInfo, info);\n    }\n    return {\n      originalFilename,\n      filename,\n      assetInfo\n    };\n  }\n\n  /**\n   * @private\n   * @param {NormalModule} module module for which the code should be generated\n   * @param {GenerateContext} generateContext context for generate\n   * @param {string} filename the filename\n   * @param {AssetInfo} assetInfo the asset info\n   * @param {string} contentHash the content hash\n   * @returns {{ assetPath: string, assetInfo: AssetInfo }} asset path and info\n   */\n  _getAssetPathWithInfo(module, {\n    runtimeTemplate,\n    runtime,\n    chunkGraph,\n    type,\n    runtimeRequirements\n  }, filename, assetInfo, contentHash) {\n    const sourceFilename = this.getSourceFileName(module, runtimeTemplate);\n    let assetPath;\n    if (this.publicPath !== undefined && type === \"javascript\") {\n      const {\n        path,\n        info\n      } = runtimeTemplate.compilation.getAssetPathWithInfo(this.publicPath, {\n        module,\n        runtime,\n        filename: sourceFilename,\n        chunkGraph,\n        contentHash\n      });\n      assetInfo = mergeAssetInfo(assetInfo, info);\n      assetPath = JSON.stringify(path + filename);\n    } else if (this.publicPath !== undefined && type === \"css-url\") {\n      const {\n        path,\n        info\n      } = runtimeTemplate.compilation.getAssetPathWithInfo(this.publicPath, {\n        module,\n        runtime,\n        filename: sourceFilename,\n        chunkGraph,\n        contentHash\n      });\n      assetInfo = mergeAssetInfo(assetInfo, info);\n      assetPath = path + filename;\n    } else if (type === \"javascript\") {\n      // add __webpack_require__.p\n      runtimeRequirements.add(RuntimeGlobals.publicPath);\n      assetPath = runtimeTemplate.concatenation({\n        expr: RuntimeGlobals.publicPath\n      }, filename);\n    } else if (type === \"css-url\") {\n      const compilation = runtimeTemplate.compilation;\n      const path = compilation.outputOptions.publicPath === \"auto\" ? CssUrlDependency.PUBLIC_PATH_AUTO : compilation.getAssetPath(/** @type {TemplatePath} */\n      compilation.outputOptions.publicPath, {\n        hash: compilation.hash\n      });\n      assetPath = path + filename;\n    }\n    return {\n      // eslint-disable-next-line object-shorthand\n      assetPath: (/** @type {string} */assetPath),\n      assetInfo: {\n        sourceFilename,\n        ...assetInfo\n      }\n    };\n  }\n\n  /**\n   * @param {NormalModule} module module for which the code should be generated\n   * @param {GenerateContext} generateContext context for generate\n   * @returns {Source | null} generated code\n   */\n  generate(module, generateContext) {\n    const {\n      type,\n      getData,\n      runtimeTemplate,\n      runtimeRequirements,\n      concatenationScope\n    } = generateContext;\n    let content;\n    const needContent = type === \"javascript\" || type === \"css-url\";\n    const data = getData ? getData() : undefined;\n    if (/** @type {BuildInfo} */\n    module.buildInfo.dataUrl && needContent) {\n      const encodedSource = this.generateDataUri(module);\n      content = type === \"javascript\" ? JSON.stringify(encodedSource) : encodedSource;\n      if (data) {\n        data.set(\"url\", {\n          [type]: content,\n          ...data.get(\"url\")\n        });\n      }\n    } else {\n      const hash = createHash(/** @type {Algorithm} */\n      runtimeTemplate.outputOptions.hashFunction);\n      if (runtimeTemplate.outputOptions.hashSalt) {\n        hash.update(runtimeTemplate.outputOptions.hashSalt);\n      }\n      hash.update(/** @type {Source} */module.originalSource().buffer());\n      const fullHash = /** @type {string} */\n      hash.digest(runtimeTemplate.outputOptions.hashDigest);\n      if (data) {\n        data.set(\"fullContentHash\", fullHash);\n      }\n\n      /** @type {BuildInfo} */\n      module.buildInfo.fullContentHash = fullHash;\n\n      /** @type {string} */\n      const contentHash = nonNumericOnlyHash(fullHash, /** @type {number} */\n      generateContext.runtimeTemplate.outputOptions.hashDigestLength);\n      if (data) {\n        data.set(\"contentHash\", contentHash);\n      }\n      const {\n        originalFilename,\n        filename,\n        assetInfo\n      } = this._getFilenameWithInfo(module, generateContext, contentHash);\n      if (data) {\n        data.set(\"filename\", filename);\n      }\n      let {\n        assetPath,\n        assetInfo: newAssetInfo\n      } = this._getAssetPathWithInfo(module, generateContext, originalFilename, assetInfo, contentHash);\n      if (data && (type === \"javascript\" || type === \"css-url\")) {\n        data.set(\"url\", {\n          [type]: assetPath,\n          ...data.get(\"url\")\n        });\n      }\n      if (data && data.get(\"assetInfo\")) {\n        newAssetInfo = mergeAssetInfo(data.get(\"assetInfo\"), newAssetInfo);\n      }\n      if (data) {\n        data.set(\"assetInfo\", newAssetInfo);\n      }\n\n      // Due to code generation caching module.buildInfo.XXX can't used to store such information\n      // It need to be stored in the code generation results instead, where it's cached too\n      // TODO webpack 6 For back-compat reasons we also store in on module.buildInfo\n      /** @type {BuildInfo} */\n      module.buildInfo.filename = filename;\n\n      /** @type {BuildInfo} */\n      module.buildInfo.assetInfo = newAssetInfo;\n      content = assetPath;\n    }\n    if (type === \"javascript\") {\n      if (concatenationScope) {\n        concatenationScope.registerNamespaceExport(ConcatenationScope.NAMESPACE_OBJECT_EXPORT);\n        return new RawSource(`${runtimeTemplate.supportsConst() ? \"const\" : \"var\"} ${ConcatenationScope.NAMESPACE_OBJECT_EXPORT} = ${content};`);\n      }\n      runtimeRequirements.add(RuntimeGlobals.module);\n      return new RawSource(`${RuntimeGlobals.module}.exports = ${content};`);\n    } else if (type === \"css-url\") {\n      return null;\n    }\n    return /** @type {Source} */module.originalSource();\n  }\n\n  /**\n   * @param {NormalModule} module fresh module\n   * @returns {SourceTypes} available types (do not mutate)\n   */\n  getTypes(module) {\n    const sourceTypes = new Set();\n    const connections = this._moduleGraph.getIncomingConnections(module);\n    for (const connection of connections) {\n      if (!connection.originModule) {\n        continue;\n      }\n      sourceTypes.add(connection.originModule.type.split(\"/\")[0]);\n    }\n    if (module.buildInfo && module.buildInfo.dataUrl || this.emit === false) {\n      if (sourceTypes) {\n        if (sourceTypes.has(\"javascript\") && sourceTypes.has(\"css\")) {\n          return JS_AND_CSS_URL_TYPES;\n        } else if (sourceTypes.has(\"javascript\")) {\n          return JS_TYPES;\n        } else if (sourceTypes.has(\"css\")) {\n          return CSS_URL_TYPES;\n        }\n      }\n      return NO_TYPES;\n    }\n    if (sourceTypes) {\n      if (sourceTypes.has(\"javascript\") && sourceTypes.has(\"css\")) {\n        return ASSET_AND_JS_AND_CSS_URL_TYPES;\n      } else if (sourceTypes.has(\"javascript\")) {\n        return ASSET_AND_JS_TYPES;\n      } else if (sourceTypes.has(\"css\")) {\n        return ASSET_AND_CSS_URL_TYPES;\n      }\n    }\n    return ASSET_TYPES;\n  }\n\n  /**\n   * @param {NormalModule} module the module\n   * @param {string=} type source type\n   * @returns {number} estimate size of the module\n   */\n  getSize(module, type) {\n    switch (type) {\n      case ASSET_MODULE_TYPE:\n        {\n          const originalSource = module.originalSource();\n          if (!originalSource) {\n            return 0;\n          }\n          return originalSource.size();\n        }\n      default:\n        if (module.buildInfo && module.buildInfo.dataUrl) {\n          const originalSource = module.originalSource();\n          if (!originalSource) {\n            return 0;\n          }\n\n          // roughly for data url\n          // Example: m.exports=\"data:image/png;base64,ag82/f+2==\"\n          // 4/3 = base64 encoding\n          // 34 = ~ data url header + footer + rounding\n          return originalSource.size() * 1.34 + 36;\n        }\n        // it's only estimated so this number is probably fine\n        // Example: m.exports=r.p+\"0123456789012345678901.ext\"\n        return 42;\n    }\n  }\n\n  /**\n   * @param {Hash} hash hash that will be modified\n   * @param {UpdateHashContext} updateHashContext context for updating hash\n   */\n  updateHash(hash, updateHashContext) {\n    const {\n      module\n    } = updateHashContext;\n    if (/** @type {BuildInfo} */\n    module.buildInfo.dataUrl) {\n      hash.update(\"data-url\");\n      // this.dataUrlOptions as function should be pure and only depend on input source and filename\n      // therefore it doesn't need to be hashed\n      if (typeof this.dataUrlOptions === \"function\") {\n        const ident = /** @type {{ ident?: string }} */this.dataUrlOptions.ident;\n        if (ident) hash.update(ident);\n      } else {\n        const dataUrlOptions = /** @type {AssetGeneratorDataUrlOptions} */\n        this.dataUrlOptions;\n        if (dataUrlOptions.encoding && dataUrlOptions.encoding !== DEFAULT_ENCODING) {\n          hash.update(dataUrlOptions.encoding);\n        }\n        if (dataUrlOptions.mimetype) hash.update(dataUrlOptions.mimetype);\n        // computed mimetype depends only on module filename which is already part of the hash\n      }\n    } else {\n      hash.update(\"resource\");\n      const {\n        module,\n        chunkGraph,\n        runtime\n      } = updateHashContext;\n      const runtimeTemplate = /** @type {NonNullable<UpdateHashContext[\"runtimeTemplate\"]>} */\n      updateHashContext.runtimeTemplate;\n      const pathData = {\n        module,\n        runtime,\n        filename: this.getSourceFileName(module, runtimeTemplate),\n        chunkGraph,\n        contentHash: runtimeTemplate.contentHashReplacement\n      };\n      if (typeof this.publicPath === \"function\") {\n        hash.update(\"path\");\n        const assetInfo = {};\n        hash.update(this.publicPath(pathData, assetInfo));\n        hash.update(JSON.stringify(assetInfo));\n      } else if (this.publicPath) {\n        hash.update(\"path\");\n        hash.update(this.publicPath);\n      } else {\n        hash.update(\"no-path\");\n      }\n      const assetModuleFilename = this.filename || (/** @type {AssetModuleFilename} */\n      runtimeTemplate.outputOptions.assetModuleFilename);\n      const {\n        path: filename,\n        info\n      } = runtimeTemplate.compilation.getAssetPathWithInfo(assetModuleFilename, pathData);\n      hash.update(filename);\n      hash.update(JSON.stringify(info));\n    }\n  }\n}\nmodule.exports = AssetGenerator;","map":{"version":3,"names":["mimeTypes","require","path","RawSource","ConcatenationScope","Generator","NO_TYPES","ASSET_TYPES","ASSET_AND_JS_TYPES","ASSET_AND_JS_AND_CSS_URL_TYPES","ASSET_AND_CSS_URL_TYPES","JS_TYPES","JS_AND_CSS_URL_TYPES","CSS_URL_TYPES","ASSET_MODULE_TYPE","RuntimeGlobals","CssUrlDependency","createHash","makePathsRelative","nonNumericOnlyHash","mergeMaybeArrays","a","b","set","Set","Array","isArray","item","add","from","mergeAssetInfo","result","key","Object","keys","mergeRelatedInfo","Error","encodeDataUri","encoding","source","encodedContent","buffer","toString","content","encodeURIComponent","replace","character","codePointAt","decodeDataUriContent","isBase64","Buffer","decodeURIComponent","_","DEFAULT_ENCODING","AssetGenerator","constructor","moduleGraph","dataUrlOptions","filename","publicPath","outputPath","emit","_moduleGraph","getSourceFileName","module","runtimeTemplate","compilation","compiler","context","matchResource","resource","root","getConcatenationBailoutReason","undefined","getMimeType","mimeType","mimetype","ext","extname","nameForCondition","resourceResolveData","parameters","lookup","generateDataUri","originalSource","encodedSource","call","equals","_getFilenameWithInfo","runtime","chunkGraph","contentHash","assetModuleFilename","outputOptions","sourceFilename","info","assetInfo","getAssetPathWithInfo","originalFilename","posix","join","_getAssetPathWithInfo","type","runtimeRequirements","assetPath","JSON","stringify","concatenation","expr","PUBLIC_PATH_AUTO","getAssetPath","hash","generate","generateContext","getData","concatenationScope","needContent","data","buildInfo","dataUrl","get","hashFunction","hashSalt","update","fullHash","digest","hashDigest","fullContentHash","hashDigestLength","newAssetInfo","registerNamespaceExport","NAMESPACE_OBJECT_EXPORT","supportsConst","getTypes","sourceTypes","connections","getIncomingConnections","connection","originModule","split","has","getSize","size","updateHash","updateHashContext","ident","pathData","contentHashReplacement","exports"],"sources":["/home/wickliff/Desktop/dev-waki/portfolio2/node_modules/webpack/lib/asset/AssetGenerator.js"],"sourcesContent":["/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Sergey Melyukov @smelukov\n*/\n\n\"use strict\";\n\nconst mimeTypes = require(\"mime-types\");\nconst path = require(\"path\");\nconst { RawSource } = require(\"webpack-sources\");\nconst ConcatenationScope = require(\"../ConcatenationScope\");\nconst Generator = require(\"../Generator\");\nconst {\n\tNO_TYPES,\n\tASSET_TYPES,\n\tASSET_AND_JS_TYPES,\n\tASSET_AND_JS_AND_CSS_URL_TYPES,\n\tASSET_AND_CSS_URL_TYPES,\n\tJS_TYPES,\n\tJS_AND_CSS_URL_TYPES,\n\tCSS_URL_TYPES\n} = require(\"../ModuleSourceTypesConstants\");\nconst { ASSET_MODULE_TYPE } = require(\"../ModuleTypeConstants\");\nconst RuntimeGlobals = require(\"../RuntimeGlobals\");\nconst CssUrlDependency = require(\"../dependencies/CssUrlDependency\");\nconst createHash = require(\"../util/createHash\");\nconst { makePathsRelative } = require(\"../util/identifier\");\nconst nonNumericOnlyHash = require(\"../util/nonNumericOnlyHash\");\n\n/** @typedef {import(\"webpack-sources\").Source} Source */\n/** @typedef {import(\"../../declarations/WebpackOptions\").AssetGeneratorDataUrlOptions} AssetGeneratorDataUrlOptions */\n/** @typedef {import(\"../../declarations/WebpackOptions\").AssetGeneratorOptions} AssetGeneratorOptions */\n/** @typedef {import(\"../../declarations/WebpackOptions\").AssetModuleFilename} AssetModuleFilename */\n/** @typedef {import(\"../../declarations/WebpackOptions\").AssetModuleOutputPath} AssetModuleOutputPath */\n/** @typedef {import(\"../../declarations/WebpackOptions\").RawPublicPath} RawPublicPath */\n/** @typedef {import(\"../Compilation\")} Compilation */\n/** @typedef {import(\"../Compilation\").AssetInfo} AssetInfo */\n/** @typedef {import(\"../Compilation\").InterpolatedPathAndAssetInfo} InterpolatedPathAndAssetInfo */\n/** @typedef {import(\"../Compiler\")} Compiler */\n/** @typedef {import(\"../Generator\").GenerateContext} GenerateContext */\n/** @typedef {import(\"../Generator\").UpdateHashContext} UpdateHashContext */\n/** @typedef {import(\"../Module\")} Module */\n/** @typedef {import(\"../Module\").BuildInfo} BuildInfo */\n/** @typedef {import(\"../Module\").BuildMeta} BuildMeta */\n/** @typedef {import(\"../Module\").ConcatenationBailoutReasonContext} ConcatenationBailoutReasonContext */\n/** @typedef {import(\"../Module\").SourceTypes} SourceTypes */\n/** @typedef {import(\"../ModuleGraph\")} ModuleGraph */\n/** @typedef {import(\"../NormalModule\")} NormalModule */\n/** @typedef {import(\"../RuntimeTemplate\")} RuntimeTemplate */\n/** @typedef {import(\"../TemplatedPathPlugin\").TemplatePath} TemplatePath */\n/** @typedef {import(\"../util/Hash\")} Hash */\n/** @typedef {import(\"../util/createHash\").Algorithm} Algorithm */\n\n/**\n * @template T\n * @template U\n * @param {Array<T> | Set<T>} a a\n * @param {Array<U> | Set<U>} b b\n * @returns {Array<T> & Array<U>} array\n */\nconst mergeMaybeArrays = (a, b) => {\n\tconst set = new Set();\n\tif (Array.isArray(a)) for (const item of a) set.add(item);\n\telse set.add(a);\n\tif (Array.isArray(b)) for (const item of b) set.add(item);\n\telse set.add(b);\n\treturn Array.from(set);\n};\n\n/**\n * @template {object} T\n * @template {object} U\n * @param {TODO} a a\n * @param {TODO} b b\n * @returns {T & U} object\n */\nconst mergeAssetInfo = (a, b) => {\n\tconst result = { ...a, ...b };\n\tfor (const key of Object.keys(a)) {\n\t\tif (key in b) {\n\t\t\tif (a[key] === b[key]) continue;\n\t\t\tswitch (key) {\n\t\t\t\tcase \"fullhash\":\n\t\t\t\tcase \"chunkhash\":\n\t\t\t\tcase \"modulehash\":\n\t\t\t\tcase \"contenthash\":\n\t\t\t\t\tresult[key] = mergeMaybeArrays(a[key], b[key]);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"immutable\":\n\t\t\t\tcase \"development\":\n\t\t\t\tcase \"hotModuleReplacement\":\n\t\t\t\tcase \"javascriptModule\":\n\t\t\t\t\tresult[key] = a[key] || b[key];\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"related\":\n\t\t\t\t\tresult[key] = mergeRelatedInfo(a[key], b[key]);\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tthrow new Error(`Can't handle conflicting asset info for ${key}`);\n\t\t\t}\n\t\t}\n\t}\n\treturn result;\n};\n\n/**\n * @template {object} T\n * @template {object} U\n * @param {TODO} a a\n * @param {TODO} b b\n * @returns {T & U} object\n */\nconst mergeRelatedInfo = (a, b) => {\n\tconst result = { ...a, ...b };\n\tfor (const key of Object.keys(a)) {\n\t\tif (key in b) {\n\t\t\tif (a[key] === b[key]) continue;\n\t\t\tresult[key] = mergeMaybeArrays(a[key], b[key]);\n\t\t}\n\t}\n\treturn result;\n};\n\n/**\n * @param {\"base64\" | false} encoding encoding\n * @param {Source} source source\n * @returns {string} encoded data\n */\nconst encodeDataUri = (encoding, source) => {\n\t/** @type {string | undefined} */\n\tlet encodedContent;\n\n\tswitch (encoding) {\n\t\tcase \"base64\": {\n\t\t\tencodedContent = source.buffer().toString(\"base64\");\n\t\t\tbreak;\n\t\t}\n\t\tcase false: {\n\t\t\tconst content = source.source();\n\n\t\t\tif (typeof content !== \"string\") {\n\t\t\t\tencodedContent = content.toString(\"utf-8\");\n\t\t\t}\n\n\t\t\tencodedContent = encodeURIComponent(\n\t\t\t\t/** @type {string} */\n\t\t\t\t(encodedContent)\n\t\t\t).replace(\n\t\t\t\t/[!'()*]/g,\n\t\t\t\tcharacter =>\n\t\t\t\t\t`%${/** @type {number} */ (character.codePointAt(0)).toString(16)}`\n\t\t\t);\n\t\t\tbreak;\n\t\t}\n\t\tdefault:\n\t\t\tthrow new Error(`Unsupported encoding '${encoding}'`);\n\t}\n\n\treturn encodedContent;\n};\n\n/**\n * @param {string} encoding encoding\n * @param {string} content content\n * @returns {Buffer} decoded content\n */\nconst decodeDataUriContent = (encoding, content) => {\n\tconst isBase64 = encoding === \"base64\";\n\n\tif (isBase64) {\n\t\treturn Buffer.from(content, \"base64\");\n\t}\n\n\t// If we can't decode return the original body\n\ttry {\n\t\treturn Buffer.from(decodeURIComponent(content), \"ascii\");\n\t} catch (_) {\n\t\treturn Buffer.from(content, \"ascii\");\n\t}\n};\n\nconst DEFAULT_ENCODING = \"base64\";\n\nclass AssetGenerator extends Generator {\n\t/**\n\t * @param {ModuleGraph} moduleGraph the module graph\n\t * @param {AssetGeneratorOptions[\"dataUrl\"]=} dataUrlOptions the options for the data url\n\t * @param {AssetModuleFilename=} filename override for output.assetModuleFilename\n\t * @param {RawPublicPath=} publicPath override for output.assetModulePublicPath\n\t * @param {AssetModuleOutputPath=} outputPath the output path for the emitted file which is not included in the runtime import\n\t * @param {boolean=} emit generate output asset\n\t */\n\tconstructor(\n\t\tmoduleGraph,\n\t\tdataUrlOptions,\n\t\tfilename,\n\t\tpublicPath,\n\t\toutputPath,\n\t\temit\n\t) {\n\t\tsuper();\n\t\tthis.dataUrlOptions = dataUrlOptions;\n\t\tthis.filename = filename;\n\t\tthis.publicPath = publicPath;\n\t\tthis.outputPath = outputPath;\n\t\tthis.emit = emit;\n\t\tthis._moduleGraph = moduleGraph;\n\t}\n\n\t/**\n\t * @param {NormalModule} module module\n\t * @param {RuntimeTemplate} runtimeTemplate runtime template\n\t * @returns {string} source file name\n\t */\n\tgetSourceFileName(module, runtimeTemplate) {\n\t\treturn makePathsRelative(\n\t\t\truntimeTemplate.compilation.compiler.context,\n\t\t\tmodule.matchResource || module.resource,\n\t\t\truntimeTemplate.compilation.compiler.root\n\t\t).replace(/^\\.\\//, \"\");\n\t}\n\n\t/**\n\t * @param {NormalModule} module module for which the bailout reason should be determined\n\t * @param {ConcatenationBailoutReasonContext} context context\n\t * @returns {string | undefined} reason why this module can't be concatenated, undefined when it can be concatenated\n\t */\n\tgetConcatenationBailoutReason(module, context) {\n\t\treturn undefined;\n\t}\n\n\t/**\n\t * @param {NormalModule} module module\n\t * @returns {string} mime type\n\t */\n\tgetMimeType(module) {\n\t\tif (typeof this.dataUrlOptions === \"function\") {\n\t\t\tthrow new Error(\n\t\t\t\t\"This method must not be called when dataUrlOptions is a function\"\n\t\t\t);\n\t\t}\n\n\t\t/** @type {string | boolean | undefined} */\n\t\tlet mimeType =\n\t\t\t/** @type {AssetGeneratorDataUrlOptions} */\n\t\t\t(this.dataUrlOptions).mimetype;\n\t\tif (mimeType === undefined) {\n\t\t\tconst ext = path.extname(\n\t\t\t\t/** @type {string} */\n\t\t\t\t(module.nameForCondition())\n\t\t\t);\n\t\t\tif (\n\t\t\t\tmodule.resourceResolveData &&\n\t\t\t\tmodule.resourceResolveData.mimetype !== undefined\n\t\t\t) {\n\t\t\t\tmimeType =\n\t\t\t\t\tmodule.resourceResolveData.mimetype +\n\t\t\t\t\tmodule.resourceResolveData.parameters;\n\t\t\t} else if (ext) {\n\t\t\t\tmimeType = mimeTypes.lookup(ext);\n\n\t\t\t\tif (typeof mimeType !== \"string\") {\n\t\t\t\t\tthrow new Error(\n\t\t\t\t\t\t\"DataUrl can't be generated automatically, \" +\n\t\t\t\t\t\t\t`because there is no mimetype for \"${ext}\" in mimetype database. ` +\n\t\t\t\t\t\t\t'Either pass a mimetype via \"generator.mimetype\" or ' +\n\t\t\t\t\t\t\t'use type: \"asset/resource\" to create a resource file instead of a DataUrl'\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (typeof mimeType !== \"string\") {\n\t\t\tthrow new Error(\n\t\t\t\t\"DataUrl can't be generated automatically. \" +\n\t\t\t\t\t'Either pass a mimetype via \"generator.mimetype\" or ' +\n\t\t\t\t\t'use type: \"asset/resource\" to create a resource file instead of a DataUrl'\n\t\t\t);\n\t\t}\n\n\t\treturn /** @type {string} */ (mimeType);\n\t}\n\n\t/**\n\t * @param {NormalModule} module module for which the code should be generated\n\t * @returns {string} DataURI\n\t */\n\tgenerateDataUri(module) {\n\t\tconst source = /** @type {Source} */ (module.originalSource());\n\n\t\tlet encodedSource;\n\n\t\tif (typeof this.dataUrlOptions === \"function\") {\n\t\t\tencodedSource = this.dataUrlOptions.call(null, source.source(), {\n\t\t\t\tfilename: module.matchResource || module.resource,\n\t\t\t\tmodule\n\t\t\t});\n\t\t} else {\n\t\t\t/** @type {\"base64\" | false | undefined} */\n\t\t\tlet encoding =\n\t\t\t\t/** @type {AssetGeneratorDataUrlOptions} */\n\t\t\t\t(this.dataUrlOptions).encoding;\n\t\t\tif (\n\t\t\t\tencoding === undefined &&\n\t\t\t\tmodule.resourceResolveData &&\n\t\t\t\tmodule.resourceResolveData.encoding !== undefined\n\t\t\t) {\n\t\t\t\tencoding = module.resourceResolveData.encoding;\n\t\t\t}\n\t\t\tif (encoding === undefined) {\n\t\t\t\tencoding = DEFAULT_ENCODING;\n\t\t\t}\n\t\t\tconst mimeType = this.getMimeType(module);\n\n\t\t\tlet encodedContent;\n\n\t\t\tif (\n\t\t\t\tmodule.resourceResolveData &&\n\t\t\t\tmodule.resourceResolveData.encoding === encoding &&\n\t\t\t\tdecodeDataUriContent(\n\t\t\t\t\tmodule.resourceResolveData.encoding,\n\t\t\t\t\tmodule.resourceResolveData.encodedContent\n\t\t\t\t).equals(source.buffer())\n\t\t\t) {\n\t\t\t\tencodedContent = module.resourceResolveData.encodedContent;\n\t\t\t} else {\n\t\t\t\tencodedContent = encodeDataUri(encoding, source);\n\t\t\t}\n\n\t\t\tencodedSource = `data:${mimeType}${\n\t\t\t\tencoding ? `;${encoding}` : \"\"\n\t\t\t},${encodedContent}`;\n\t\t}\n\n\t\treturn encodedSource;\n\t}\n\n\t/**\n\t * @private\n\t * @param {NormalModule} module module for which the code should be generated\n\t * @param {GenerateContext} generateContext context for generate\n\t * @param {string} contentHash the content hash\n\t * @returns {{ filename: string, originalFilename: string, assetInfo: AssetInfo }} info\n\t */\n\t_getFilenameWithInfo(\n\t\tmodule,\n\t\t{ runtime, runtimeTemplate, chunkGraph },\n\t\tcontentHash\n\t) {\n\t\tconst assetModuleFilename =\n\t\t\tthis.filename ||\n\t\t\t/** @type {AssetModuleFilename} */\n\t\t\t(runtimeTemplate.outputOptions.assetModuleFilename);\n\n\t\tconst sourceFilename = this.getSourceFileName(module, runtimeTemplate);\n\t\tlet { path: filename, info: assetInfo } =\n\t\t\truntimeTemplate.compilation.getAssetPathWithInfo(assetModuleFilename, {\n\t\t\t\tmodule,\n\t\t\t\truntime,\n\t\t\t\tfilename: sourceFilename,\n\t\t\t\tchunkGraph,\n\t\t\t\tcontentHash\n\t\t\t});\n\n\t\tconst originalFilename = filename;\n\n\t\tif (this.outputPath) {\n\t\t\tconst { path: outputPath, info } =\n\t\t\t\truntimeTemplate.compilation.getAssetPathWithInfo(this.outputPath, {\n\t\t\t\t\tmodule,\n\t\t\t\t\truntime,\n\t\t\t\t\tfilename: sourceFilename,\n\t\t\t\t\tchunkGraph,\n\t\t\t\t\tcontentHash\n\t\t\t\t});\n\t\t\tfilename = path.posix.join(outputPath, filename);\n\t\t\tassetInfo = mergeAssetInfo(assetInfo, info);\n\t\t}\n\n\t\treturn { originalFilename, filename, assetInfo };\n\t}\n\n\t/**\n\t * @private\n\t * @param {NormalModule} module module for which the code should be generated\n\t * @param {GenerateContext} generateContext context for generate\n\t * @param {string} filename the filename\n\t * @param {AssetInfo} assetInfo the asset info\n\t * @param {string} contentHash the content hash\n\t * @returns {{ assetPath: string, assetInfo: AssetInfo }} asset path and info\n\t */\n\t_getAssetPathWithInfo(\n\t\tmodule,\n\t\t{ runtimeTemplate, runtime, chunkGraph, type, runtimeRequirements },\n\t\tfilename,\n\t\tassetInfo,\n\t\tcontentHash\n\t) {\n\t\tconst sourceFilename = this.getSourceFileName(module, runtimeTemplate);\n\n\t\tlet assetPath;\n\n\t\tif (this.publicPath !== undefined && type === \"javascript\") {\n\t\t\tconst { path, info } = runtimeTemplate.compilation.getAssetPathWithInfo(\n\t\t\t\tthis.publicPath,\n\t\t\t\t{\n\t\t\t\t\tmodule,\n\t\t\t\t\truntime,\n\t\t\t\t\tfilename: sourceFilename,\n\t\t\t\t\tchunkGraph,\n\t\t\t\t\tcontentHash\n\t\t\t\t}\n\t\t\t);\n\t\t\tassetInfo = mergeAssetInfo(assetInfo, info);\n\t\t\tassetPath = JSON.stringify(path + filename);\n\t\t} else if (this.publicPath !== undefined && type === \"css-url\") {\n\t\t\tconst { path, info } = runtimeTemplate.compilation.getAssetPathWithInfo(\n\t\t\t\tthis.publicPath,\n\t\t\t\t{\n\t\t\t\t\tmodule,\n\t\t\t\t\truntime,\n\t\t\t\t\tfilename: sourceFilename,\n\t\t\t\t\tchunkGraph,\n\t\t\t\t\tcontentHash\n\t\t\t\t}\n\t\t\t);\n\t\t\tassetInfo = mergeAssetInfo(assetInfo, info);\n\t\t\tassetPath = path + filename;\n\t\t} else if (type === \"javascript\") {\n\t\t\t// add __webpack_require__.p\n\t\t\truntimeRequirements.add(RuntimeGlobals.publicPath);\n\t\t\tassetPath = runtimeTemplate.concatenation(\n\t\t\t\t{ expr: RuntimeGlobals.publicPath },\n\t\t\t\tfilename\n\t\t\t);\n\t\t} else if (type === \"css-url\") {\n\t\t\tconst compilation = runtimeTemplate.compilation;\n\t\t\tconst path =\n\t\t\t\tcompilation.outputOptions.publicPath === \"auto\"\n\t\t\t\t\t? CssUrlDependency.PUBLIC_PATH_AUTO\n\t\t\t\t\t: compilation.getAssetPath(\n\t\t\t\t\t\t\t/** @type {TemplatePath} */\n\t\t\t\t\t\t\t(compilation.outputOptions.publicPath),\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\thash: compilation.hash\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t);\n\n\t\t\tassetPath = path + filename;\n\t\t}\n\n\t\treturn {\n\t\t\t// eslint-disable-next-line object-shorthand\n\t\t\tassetPath: /** @type {string} */ (assetPath),\n\t\t\tassetInfo: { sourceFilename, ...assetInfo }\n\t\t};\n\t}\n\n\t/**\n\t * @param {NormalModule} module module for which the code should be generated\n\t * @param {GenerateContext} generateContext context for generate\n\t * @returns {Source | null} generated code\n\t */\n\tgenerate(module, generateContext) {\n\t\tconst {\n\t\t\ttype,\n\t\t\tgetData,\n\t\t\truntimeTemplate,\n\t\t\truntimeRequirements,\n\t\t\tconcatenationScope\n\t\t} = generateContext;\n\n\t\tlet content;\n\n\t\tconst needContent = type === \"javascript\" || type === \"css-url\";\n\n\t\tconst data = getData ? getData() : undefined;\n\n\t\tif (\n\t\t\t/** @type {BuildInfo} */\n\t\t\t(module.buildInfo).dataUrl &&\n\t\t\tneedContent\n\t\t) {\n\t\t\tconst encodedSource = this.generateDataUri(module);\n\t\t\tcontent =\n\t\t\t\ttype === \"javascript\" ? JSON.stringify(encodedSource) : encodedSource;\n\n\t\t\tif (data) {\n\t\t\t\tdata.set(\"url\", { [type]: content, ...data.get(\"url\") });\n\t\t\t}\n\t\t} else {\n\t\t\tconst hash = createHash(\n\t\t\t\t/** @type {Algorithm} */\n\t\t\t\t(runtimeTemplate.outputOptions.hashFunction)\n\t\t\t);\n\n\t\t\tif (runtimeTemplate.outputOptions.hashSalt) {\n\t\t\t\thash.update(runtimeTemplate.outputOptions.hashSalt);\n\t\t\t}\n\n\t\t\thash.update(/** @type {Source} */ (module.originalSource()).buffer());\n\n\t\t\tconst fullHash =\n\t\t\t\t/** @type {string} */\n\t\t\t\t(hash.digest(runtimeTemplate.outputOptions.hashDigest));\n\n\t\t\tif (data) {\n\t\t\t\tdata.set(\"fullContentHash\", fullHash);\n\t\t\t}\n\n\t\t\t/** @type {BuildInfo} */\n\t\t\t(module.buildInfo).fullContentHash = fullHash;\n\n\t\t\t/** @type {string} */\n\t\t\tconst contentHash = nonNumericOnlyHash(\n\t\t\t\tfullHash,\n\t\t\t\t/** @type {number} */\n\t\t\t\t(generateContext.runtimeTemplate.outputOptions.hashDigestLength)\n\t\t\t);\n\n\t\t\tif (data) {\n\t\t\t\tdata.set(\"contentHash\", contentHash);\n\t\t\t}\n\n\t\t\tconst { originalFilename, filename, assetInfo } =\n\t\t\t\tthis._getFilenameWithInfo(module, generateContext, contentHash);\n\n\t\t\tif (data) {\n\t\t\t\tdata.set(\"filename\", filename);\n\t\t\t}\n\n\t\t\tlet { assetPath, assetInfo: newAssetInfo } = this._getAssetPathWithInfo(\n\t\t\t\tmodule,\n\t\t\t\tgenerateContext,\n\t\t\t\toriginalFilename,\n\t\t\t\tassetInfo,\n\t\t\t\tcontentHash\n\t\t\t);\n\n\t\t\tif (data && (type === \"javascript\" || type === \"css-url\")) {\n\t\t\t\tdata.set(\"url\", { [type]: assetPath, ...data.get(\"url\") });\n\t\t\t}\n\n\t\t\tif (data && data.get(\"assetInfo\")) {\n\t\t\t\tnewAssetInfo = mergeAssetInfo(data.get(\"assetInfo\"), newAssetInfo);\n\t\t\t}\n\n\t\t\tif (data) {\n\t\t\t\tdata.set(\"assetInfo\", newAssetInfo);\n\t\t\t}\n\n\t\t\t// Due to code generation caching module.buildInfo.XXX can't used to store such information\n\t\t\t// It need to be stored in the code generation results instead, where it's cached too\n\t\t\t// TODO webpack 6 For back-compat reasons we also store in on module.buildInfo\n\t\t\t/** @type {BuildInfo} */\n\t\t\t(module.buildInfo).filename = filename;\n\n\t\t\t/** @type {BuildInfo} */\n\t\t\t(module.buildInfo).assetInfo = newAssetInfo;\n\n\t\t\tcontent = assetPath;\n\t\t}\n\n\t\tif (type === \"javascript\") {\n\t\t\tif (concatenationScope) {\n\t\t\t\tconcatenationScope.registerNamespaceExport(\n\t\t\t\t\tConcatenationScope.NAMESPACE_OBJECT_EXPORT\n\t\t\t\t);\n\n\t\t\t\treturn new RawSource(\n\t\t\t\t\t`${runtimeTemplate.supportsConst() ? \"const\" : \"var\"} ${\n\t\t\t\t\t\tConcatenationScope.NAMESPACE_OBJECT_EXPORT\n\t\t\t\t\t} = ${content};`\n\t\t\t\t);\n\t\t\t}\n\n\t\t\truntimeRequirements.add(RuntimeGlobals.module);\n\n\t\t\treturn new RawSource(`${RuntimeGlobals.module}.exports = ${content};`);\n\t\t} else if (type === \"css-url\") {\n\t\t\treturn null;\n\t\t}\n\n\t\treturn /** @type {Source} */ (module.originalSource());\n\t}\n\n\t/**\n\t * @param {NormalModule} module fresh module\n\t * @returns {SourceTypes} available types (do not mutate)\n\t */\n\tgetTypes(module) {\n\t\tconst sourceTypes = new Set();\n\t\tconst connections = this._moduleGraph.getIncomingConnections(module);\n\n\t\tfor (const connection of connections) {\n\t\t\tif (!connection.originModule) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tsourceTypes.add(connection.originModule.type.split(\"/\")[0]);\n\t\t}\n\n\t\tif ((module.buildInfo && module.buildInfo.dataUrl) || this.emit === false) {\n\t\t\tif (sourceTypes) {\n\t\t\t\tif (sourceTypes.has(\"javascript\") && sourceTypes.has(\"css\")) {\n\t\t\t\t\treturn JS_AND_CSS_URL_TYPES;\n\t\t\t\t} else if (sourceTypes.has(\"javascript\")) {\n\t\t\t\t\treturn JS_TYPES;\n\t\t\t\t} else if (sourceTypes.has(\"css\")) {\n\t\t\t\t\treturn CSS_URL_TYPES;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn NO_TYPES;\n\t\t}\n\n\t\tif (sourceTypes) {\n\t\t\tif (sourceTypes.has(\"javascript\") && sourceTypes.has(\"css\")) {\n\t\t\t\treturn ASSET_AND_JS_AND_CSS_URL_TYPES;\n\t\t\t} else if (sourceTypes.has(\"javascript\")) {\n\t\t\t\treturn ASSET_AND_JS_TYPES;\n\t\t\t} else if (sourceTypes.has(\"css\")) {\n\t\t\t\treturn ASSET_AND_CSS_URL_TYPES;\n\t\t\t}\n\t\t}\n\n\t\treturn ASSET_TYPES;\n\t}\n\n\t/**\n\t * @param {NormalModule} module the module\n\t * @param {string=} type source type\n\t * @returns {number} estimate size of the module\n\t */\n\tgetSize(module, type) {\n\t\tswitch (type) {\n\t\t\tcase ASSET_MODULE_TYPE: {\n\t\t\t\tconst originalSource = module.originalSource();\n\n\t\t\t\tif (!originalSource) {\n\t\t\t\t\treturn 0;\n\t\t\t\t}\n\n\t\t\t\treturn originalSource.size();\n\t\t\t}\n\t\t\tdefault:\n\t\t\t\tif (module.buildInfo && module.buildInfo.dataUrl) {\n\t\t\t\t\tconst originalSource = module.originalSource();\n\n\t\t\t\t\tif (!originalSource) {\n\t\t\t\t\t\treturn 0;\n\t\t\t\t\t}\n\n\t\t\t\t\t// roughly for data url\n\t\t\t\t\t// Example: m.exports=\"data:image/png;base64,ag82/f+2==\"\n\t\t\t\t\t// 4/3 = base64 encoding\n\t\t\t\t\t// 34 = ~ data url header + footer + rounding\n\t\t\t\t\treturn originalSource.size() * 1.34 + 36;\n\t\t\t\t}\n\t\t\t\t// it's only estimated so this number is probably fine\n\t\t\t\t// Example: m.exports=r.p+\"0123456789012345678901.ext\"\n\t\t\t\treturn 42;\n\t\t}\n\t}\n\n\t/**\n\t * @param {Hash} hash hash that will be modified\n\t * @param {UpdateHashContext} updateHashContext context for updating hash\n\t */\n\tupdateHash(hash, updateHashContext) {\n\t\tconst { module } = updateHashContext;\n\t\tif (\n\t\t\t/** @type {BuildInfo} */\n\t\t\t(module.buildInfo).dataUrl\n\t\t) {\n\t\t\thash.update(\"data-url\");\n\t\t\t// this.dataUrlOptions as function should be pure and only depend on input source and filename\n\t\t\t// therefore it doesn't need to be hashed\n\t\t\tif (typeof this.dataUrlOptions === \"function\") {\n\t\t\t\tconst ident = /** @type {{ ident?: string }} */ (this.dataUrlOptions)\n\t\t\t\t\t.ident;\n\t\t\t\tif (ident) hash.update(ident);\n\t\t\t} else {\n\t\t\t\tconst dataUrlOptions =\n\t\t\t\t\t/** @type {AssetGeneratorDataUrlOptions} */\n\t\t\t\t\t(this.dataUrlOptions);\n\t\t\t\tif (\n\t\t\t\t\tdataUrlOptions.encoding &&\n\t\t\t\t\tdataUrlOptions.encoding !== DEFAULT_ENCODING\n\t\t\t\t) {\n\t\t\t\t\thash.update(dataUrlOptions.encoding);\n\t\t\t\t}\n\t\t\t\tif (dataUrlOptions.mimetype) hash.update(dataUrlOptions.mimetype);\n\t\t\t\t// computed mimetype depends only on module filename which is already part of the hash\n\t\t\t}\n\t\t} else {\n\t\t\thash.update(\"resource\");\n\n\t\t\tconst { module, chunkGraph, runtime } = updateHashContext;\n\t\t\tconst runtimeTemplate =\n\t\t\t\t/** @type {NonNullable<UpdateHashContext[\"runtimeTemplate\"]>} */\n\t\t\t\t(updateHashContext.runtimeTemplate);\n\n\t\t\tconst pathData = {\n\t\t\t\tmodule,\n\t\t\t\truntime,\n\t\t\t\tfilename: this.getSourceFileName(module, runtimeTemplate),\n\t\t\t\tchunkGraph,\n\t\t\t\tcontentHash: runtimeTemplate.contentHashReplacement\n\t\t\t};\n\n\t\t\tif (typeof this.publicPath === \"function\") {\n\t\t\t\thash.update(\"path\");\n\t\t\t\tconst assetInfo = {};\n\t\t\t\thash.update(this.publicPath(pathData, assetInfo));\n\t\t\t\thash.update(JSON.stringify(assetInfo));\n\t\t\t} else if (this.publicPath) {\n\t\t\t\thash.update(\"path\");\n\t\t\t\thash.update(this.publicPath);\n\t\t\t} else {\n\t\t\t\thash.update(\"no-path\");\n\t\t\t}\n\n\t\t\tconst assetModuleFilename =\n\t\t\t\tthis.filename ||\n\t\t\t\t/** @type {AssetModuleFilename} */\n\t\t\t\t(runtimeTemplate.outputOptions.assetModuleFilename);\n\t\t\tconst { path: filename, info } =\n\t\t\t\truntimeTemplate.compilation.getAssetPathWithInfo(\n\t\t\t\t\tassetModuleFilename,\n\t\t\t\t\tpathData\n\t\t\t\t);\n\t\t\thash.update(filename);\n\t\t\thash.update(JSON.stringify(info));\n\t\t}\n\t}\n}\n\nmodule.exports = AssetGenerator;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}